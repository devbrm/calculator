{"version":3,"sources":["components/Calculator.js","components/GetHistory.js","library/handleSessionStorage.js","components/CreateInputButtons.js","components/CreateOprators.js","App.js","index.js"],"names":["CalculatorContext","React","createContext","Calculator","useState","inputValue","setInputValue","result","setResult","resultRef","useRef","historyRef","stateRef","answerRef","useEffect","sessionStorage","setItem","window","addEventListener","handleKeyDown","removeEventListener","current","handleChange","e","value","target","isNotValidInput","match","handleClick","name","closest","preVal","evaluateTheResult","calcResult","eval","isNaN","Error","newHistoryObj","expression","handleSessionStorage","lastChild","scrollIntoView","behaviour","classList","remove","error","message","add","handleBackspace","prev","slice","length","handleCE","key","id","Provider","className","onChange","ref","GetHistory","useContext","getItem","history","JSON","parse","children","map","x","textContent","inputVal","res","item","index","onClick","obj","previousObj","r","push","stringify","CreateInputButtons","props","CreateOprators","App","href","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7425fd14.chunk.js","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport GetHistory from \"./GetHistory\";\r\nimport handleSessionStorage from \"../library/handleSessionStorage\";\r\nimport CreateInputButtons from \"./CreateInputButtons\";\r\nimport CreateOprators from \"./CreateOprators\";\r\nexport const CalculatorContext = React.createContext();\r\n\r\nfunction Calculator() {\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const [result, setResult] = useState(\"\");\r\n  const resultRef = useRef(null);\r\n  const historyRef = useRef(null);\r\n  const stateRef = useRef(inputValue);\r\n  const answerRef = useRef(result);\r\n\r\n  useEffect(() => {\r\n    sessionStorage.setItem(\"calcHistory\", \"[]\");\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", handleKeyDown);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    stateRef.current = inputValue;\r\n    answerRef.current = result;\r\n  }, [inputValue, result]);\r\n\r\n  const handleChange = (e) => {\r\n    const { value } = e.target;\r\n    if (isNotValidInput(value)) return;\r\n\r\n    setInputValue(value);\r\n  };\r\n\r\n  const isNotValidInput = (value) => {\r\n    //to filter the valid inputs\r\n    if (value.match(/[^\\d\\/\\+\\*\\%\\-\\.]/g)) return true;\r\n    // to filter repeating operators, **+, and +* or *-\r\n    if (\r\n      value.match(\r\n        /[\\/\\+\\%\\-\\.]{2,}|[\\*]{3,}|[\\/\\+\\%\\-\\.]\\*|\\*[\\/\\+\\%\\-\\.]|[\\/\\+\\%\\-\\.\\*\\d]*\\.{2,}[\\/\\+\\%\\-\\.\\*\\d]/\r\n      )\r\n    )\r\n      return true;\r\n  };\r\n\r\n  const handleClick = (e) => {\r\n    const name = e.target.closest(\"button\").name;\r\n    if (isNotValidInput(inputValue + name)) return;\r\n    setInputValue((preVal) => preVal + name);\r\n  };\r\n\r\n  const evaluateTheResult = () => {\r\n    try {\r\n      const calcResult = eval(stateRef.current);\r\n      if (isNaN(calcResult)) throw new Error(\"Illegal input\");\r\n      const newHistoryObj = {\r\n        expression: stateRef.current,\r\n        result: calcResult,\r\n      };\r\n      handleSessionStorage(newHistoryObj);\r\n      setResult(calcResult);\r\n      historyRef.current.lastChild.scrollIntoView({ behaviour: \"smooth\" });\r\n      resultRef.current.classList.remove(\"warning\");\r\n    } catch (error) {\r\n      setResult(`😰${error.message}`);\r\n      resultRef.current.classList.add(\"warning\");\r\n    }\r\n  };\r\n\r\n  const handleBackspace = () =>\r\n    setInputValue((prev) => prev.slice(0, prev.length - 1));\r\n\r\n  const handleCE = () => setInputValue(\"\");\r\n\r\n  const handleKeyDown = (e) => {\r\n    switch (e.key) {\r\n      case \"Enter\":\r\n        return evaluateTheResult();\r\n\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section id=\"calculator\">\r\n      <CalculatorContext.Provider\r\n        value={{ inputValue, setInputValue, result, setResult }}\r\n      >\r\n        <h1>Nice Calculator</h1>\r\n        <div className=\"mainContainer\">\r\n          <div className=\"calContainer\">\r\n            <input onChange={handleChange} value={inputValue} />\r\n            <div ref={resultRef} className=\"result\">\r\n              {result}\r\n            </div>\r\n            <div className=\"buttonsContainer\">\r\n              <div className=\"operatorButtons\">\r\n                <CreateOprators\r\n                  handleClick={handleClick}\r\n                  evaluateTheResult={evaluateTheResult}\r\n                  handleBackspace={handleBackspace}\r\n                  handleCE={handleCE}\r\n                />\r\n              </div>\r\n              <div className=\"inputButtons\">\r\n                <CreateInputButtons handleClick={handleClick} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div ref={historyRef} className=\"history\">\r\n            <GetHistory />\r\n          </div>\r\n        </div>\r\n      </CalculatorContext.Provider>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Calculator;\r\n","import React, { useContext } from \"react\";\r\nimport { CalculatorContext } from \"./Calculator\";\r\n\r\nconst GetHistory = () => {\r\n  const { setResult, setInputValue } = useContext(CalculatorContext);\r\n  if (!!!sessionStorage.getItem(\"calcHistory\"))\r\n    sessionStorage.setItem(\"calcHistory\", \"[]\");\r\n\r\n  const history = JSON.parse(sessionStorage.getItem(\"calcHistory\"));\r\n  if (history.length < 1) return <p>No history</p>;\r\n\r\n  const handleClick = (e) => {\r\n    const [inputVal, res] = [...e.target.closest(\"p\").children].map(\r\n      (x) => x.textContent\r\n    );\r\n    setInputValue(inputVal);\r\n    setResult(res);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h2>History</h2>\r\n      {history.map((item, index) => {\r\n        const { expression, result } = item;\r\n        return (\r\n          <p key={expression + result + index} onClick={handleClick}>\r\n            <span className=\"expression\">{expression}</span>=\r\n            <span className=\"result\">{result}</span>\r\n          </p>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GetHistory;\r\n","const handleSessionStorage = (obj) => {\r\n  if (!!!sessionStorage.getItem(\"calcHistory\"))\r\n    sessionStorage.setItem(\"calcHistory\", \"[]\");\r\n\r\n  const history = JSON.parse(sessionStorage.getItem(\"calcHistory\"));\r\n  const previousObj = history[history.length - 1] || \"\";\r\n  const [e, r] = [\"expression\", \"result\"];\r\n\r\n  if (obj[e] === previousObj[e] && obj[r] === previousObj[r]) return;\r\n\r\n  history.push(obj);\r\n  sessionStorage.setItem(\"calcHistory\", JSON.stringify(history));\r\n};\r\n\r\nexport default handleSessionStorage;\r\n","import React from \"react\";\r\n\r\nfunction CreateInputButtons(props) {\r\n  const { handleClick } = props;\r\n\r\n  return (\r\n    <>\r\n      <button onClick={handleClick} name=\"1\">\r\n        1\r\n      </button>\r\n      <button onClick={handleClick} name=\"2\">\r\n        2\r\n      </button>\r\n      <button onClick={handleClick} name=\"3\">\r\n        3\r\n      </button>\r\n      <button onClick={handleClick} name=\"4\">\r\n        4\r\n      </button>\r\n      <button onClick={handleClick} name=\"5\">\r\n        5\r\n      </button>\r\n      <button onClick={handleClick} name=\"6\">\r\n        6\r\n      </button>\r\n      <button onClick={handleClick} name=\"7\">\r\n        7\r\n      </button>\r\n      <button onClick={handleClick} name=\"8\">\r\n        8\r\n      </button>\r\n      <button onClick={handleClick} name=\"9\">\r\n        9\r\n      </button>\r\n      <button onClick={handleClick} name=\"0\">\r\n        0\r\n      </button>\r\n      <button onClick={handleClick} name=\"00\">\r\n        00\r\n      </button>\r\n      <button onClick={handleClick} name=\".\">\r\n        .\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CreateInputButtons;\r\n","import React from \"react\";\r\n\r\nfunction CreateOprators(props) {\r\n  const { handleClick, evaluateTheResult, handleCE, handleBackspace } = props;\r\n\r\n  return (\r\n    <>\r\n      <button onClick={handleCE} name=\"CE\">\r\n        CE\r\n      </button>\r\n      <button onClick={handleBackspace} name=\"clear\">\r\n        clear\r\n      </button>\r\n      <button onClick={handleClick} name=\"**2\">\r\n        x<sup>2</sup>\r\n      </button>\r\n      <button onClick={handleClick} name=\"**.5\">\r\n        x<sup>1/2</sup>\r\n      </button>\r\n      <button onClick={handleClick} name=\"*\">\r\n        x\r\n      </button>\r\n      <button onClick={handleClick} name=\"/\">\r\n        /\r\n      </button>\r\n      <button onClick={handleClick} name=\"+\">\r\n        +\r\n      </button>\r\n      <button onClick={handleClick} name=\"-\">\r\n        -\r\n      </button>\r\n      <button onClick={handleClick} name=\"%\">\r\n        %\r\n      </button>\r\n      <button onClick={evaluateTheResult} name=\"=\">\r\n        =\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CreateOprators;\r\n","import React from \"react\";\nimport \"./App.css\";\nimport Calculator from \"./components/Calculator\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header>\n        made with ❤{\" \"}\n        <a href=\"http://devbrm.github.io/portfolio/\" target=\"_blank\">\n          braham prakash\n        </a>\n      </header>\n      <Calculator />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}